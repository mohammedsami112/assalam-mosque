import{e as i,Z as q,bk as C,y as B,ba as k,a as h,w as r,k as e,_ as M,o as P,b as s,A as y,t as T,b$ as L,c1 as N}from"./index-RVtWa1VN.js";import{U as x}from"./users-WmyHSQHD.js";import{G as A}from"./global-4TNOaeW-.js";import{u as S,V as E,c as v,r as b}from"./VForm-RgXt9suB.js";import{a as F,c as G,b as D,d as V,V as Z}from"./VTextField-lve7Grfh.js";import{V as j,a as m}from"./VRow-qR79mlcM.js";import{a as z}from"./VSelect-LQkA6m-M.js";import"./Api-hy5XHh9_.js";import"./forwardRefs-MOg0LXIC.js";/* empty css              */import"./VList-TDw60N8X.js";const oe={__name:"update",setup(H){const p=i(!1),f=i(!1),w=i(!0),u=i(!1),$=q(),c=M(),d=i({}),I=()=>{x.getUser(c.currentRoute.value.params.id).then(n=>{d.value=n.data,l.item_id=d.value.id,l.name=d.value.name,l.username=d.value.username,l.role=d.value.permission.id}).finally(()=>{w.value=!1})},U=i([]),l=C({item_id:null,name:null,username:null,password:null,password_confirmation:null,role:null}),g=i({}),R=B(()=>({name:{required:v.withMessage("Name Is Required",b)},username:{required:v.withMessage("Username Is Required",b)},role:{required:v.withMessage("Role Is Required",b)}})),t=S(R,l,{$externalResults:g}),_=()=>{t.value.$clearExternalResults(),t.value.$touch(),t.value.$error||(g.value={},u.value=!0,x.manageUsers(l).then(n=>{console.log(n),$.success(n.message),c.push({name:"view-users"})}).catch(n=>{g.value=n.response.data.data,$.error(n.response.data.message)}).finally(()=>{u.value=!1}))};return k(()=>{c.currentRoute.value.params.id||c.push({name:"view-users"}),I(),A.getPermissionsList().then(n=>{U.value=n.data})}),(n,o)=>(P(),h(F,{loading:e(w)},{default:r(()=>[s(D,null,{default:r(()=>[s(G,null,{default:r(()=>[y(" Edit : "+T(e(d).name),1)]),_:1})]),_:1}),s(Z,null,{default:r(()=>[s(E,{onSubmit:o[7]||(o[7]=L(a=>_(),["prevent"]))},{default:r(()=>[s(j,null,{default:r(()=>[s(m,{cols:"12",lg:"6"},{default:r(()=>[s(V,{disabled:e(u),"error-messages":e(t).name.$errors.map(a=>a.$message),onInput:e(t).name.$touch,onBlur:e(t).name.$touch,modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).name=a),label:"Name",type:"text",required:""},null,8,["disabled","error-messages","onInput","onBlur","modelValue"])]),_:1}),s(m,{cols:"12",lg:"6"},{default:r(()=>[s(V,{disabled:e(u),"error-messages":e(t).username.$errors.map(a=>a.$message),onInput:e(t).username.$touch,onBlur:e(t).username.$touch,modelValue:e(l).username,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).username=a),label:"Username",type:"text",required:""},null,8,["disabled","error-messages","onInput","onBlur","modelValue"])]),_:1}),s(m,{cols:"12"},{default:r(()=>[s(V,{disabled:e(u),modelValue:e(l).password,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).password=a),label:"Password",placeholder:"············",type:e(p)?"text":"password","append-inner-icon":e(p)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":o[3]||(o[3]=a=>p.value=!e(p))},null,8,["disabled","modelValue","type","append-inner-icon"])]),_:1}),s(m,{cols:"12"},{default:r(()=>[s(V,{disabled:e(u),modelValue:e(l).password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).password_confirmation=a),label:"Password Confirmation",placeholder:"············",type:e(f)?"text":"password","append-inner-icon":e(f)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":o[5]||(o[5]=a=>f.value=!e(f))},null,8,["disabled","modelValue","type","append-inner-icon"])]),_:1}),s(m,{cols:"12"},{default:r(()=>[s(z,{clearable:"",disabled:e(u),"error-messages":e(t).role.$errors.map(a=>a.$message),onInput:e(t).role.$touch,onBlur:e(t).role.$touch,required:"",modelValue:e(l).role,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).role=a),label:"User Role",items:e(U),"item-title":"title","item-value":"id",variant:"outlined"},null,8,["disabled","error-messages","onInput","onBlur","modelValue","items"])]),_:1}),s(m,{cols:"12"},{default:r(()=>[s(N,{loading:e(u),block:"",type:"submit",class:"mt-4"},{default:r(()=>[y(" Update ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"]))}};export{oe as default};
